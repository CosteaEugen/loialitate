<!DOCTYPE html>
<html>
<head>
  <title>Scanare cod QR</title>
  <style>
    /* Add any CSS styles you want here */
  </style>
</head>
<body>
  <div class="container">
    <h1>Scanare cod QR</h1>
    <p>Folosește camera dispozitivului tău pentru a scana un cod QR.</p>
    <video id="qrVideo" playsinline autoplay></video>
    <button id="scanButton">Începe scanarea</button>
    <div id="qrResult" style="margin-top: 10px;"></div>
  </div>

  <script src="https://unpkg.com/html5-qrcode@2.0.9/dist/html5-qrcode.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const scanButton = document.getElementById("scanButton");
      const qrResultDiv = document.getElementById("qrResult");
      const html5QrcodeScanner = new Html5QrcodeScanner(
        "qrVideo",
        { fps: 10, qrbox: { width: 250, height: 250 } },
        /* verbose= */ false
      );

      // Function to display the scan result
      function displayScanResult(result) {
        qrResultDiv.innerHTML = `
          <p>Cod QR scanat:</p>
          <p><strong>${result}</strong></p>
        `;
      }

      // Function to handle scan success
      function onScanSuccess(decodedText, decodedResult) {
        console.log(`Code matched = ${decodedText}`, decodedResult);
        displayScanResult(decodedText);
        html5QrcodeScanner.clear(); // Stop scanning after success
      }

      // Add click event to start scanning
      scanButton.addEventListener("click", function() {
        html5QrcodeScanner.render(onScanSuccess);
      });
    });
  </script>
</body>
</html>
